---
id: "cd-env-vars"
title: "Environment Variables ðŸ”‘"
guide: "coolify-deploy"
group: "Configuration"
linkRefs:
  - id: "vite-env-coolify"
    note: "Vite environment variables and modes documentation"
---

<SectionTitle>{frontmatter.title}</SectionTitle>

<Toc>
  <TocLink id="toc-how-vite">How Vite handles env vars</TocLink>
  <TocLink id="toc-setting">Setting env vars in Coolify</TocLink>
  <TocLink id="toc-dockerfile">Dockerfile: passing build args</TocLink>
  <TocLink id="toc-shared">Shared variables</TocLink>
</Toc>

<SectionIntro>
This is where Vite's build-time architecture collides with Coolify's variable system. Getting this wrong means your API URLs are empty in production.
</SectionIntro>

<SectionSubheading id="toc-how-vite">How Vite handles env vars</SectionSubheading>

<Gotcha type="warn" title="Critical concept">
Vite **statically replaces** environment variables at *build time*. When you write `import.meta.env.VITE_API_URL` in your code, Vite literally swaps that expression with the string value during the build. After the build, the value is baked into the JavaScript bundle. There's no runtime lookup.
</Gotcha>

This means:

<SectionList>
<ColItem>Only variables prefixed with `VITE_` are exposed to your app code.</ColItem>
<ColItem>Variables must be available **when `npm run build` runs**.</ColItem>
<ColItem>Changing an env var after the build has no effect â€” you must rebuild.</ColItem>
</SectionList>

<SectionSubheading id="toc-setting">Setting env vars in Coolify</SectionSubheading>

<SectionList>
<ColItem>**1. Add variables in the Coolify UI** â€” Go to your resource â†’ **Environment Variables** â†’ Add each variable.</ColItem>
<ColItem>**2. Check "Build Variable"** â€” For every `VITE_` variable, you **must** enable the **"Build Variable"** checkbox. This makes the variable available during the Docker build step when `npm run build` executes.</ColItem>
</SectionList>

<Gotcha type="danger" title="The #1 mistake">
Forgetting to check "Build Variable" for `VITE_` prefixed vars. If it's only a runtime variable, it's injected into the running container â€” but by then, Vite has already built your bundle without it. Your app will see `undefined` for those values.
</Gotcha>

<SectionSubheading id="toc-dockerfile">Dockerfile: passing build args</SectionSubheading>

If you're using a custom Dockerfile, you need to declare build arguments with `ARG` so they're available during the build stage:

```dockerfile
FROM node:22-alpine AS build
WORKDIR /app

# Declare build args that Coolify will inject
ARG VITE_API_URL
ARG VITE_APP_TITLE

# Make them available as env vars during build
ENV VITE_API_URL=$VITE_API_URL
ENV VITE_APP_TITLE=$VITE_APP_TITLE

COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY nginx.conf /etc/nginx/conf.d/default.conf
COPY --from=build /app/dist /usr/share/nginx/html
EXPOSE 80
```

<SectionSubheading id="toc-shared">Shared variables</SectionSubheading>

Coolify supports shared variables at the Team, Project, and Environment level. Useful for values like API URLs that are the same across multiple apps:

```
# Reference shared vars with double-brace syntax
{{team.SHARED_API_KEY}}
{{project.DATABASE_URL}}
{{environment.VITE_API_URL}}
```

Keep the literal keyword (`team`, `project`, `environment`) â€” don't substitute your actual team/project name.

<Gotcha type="info" title="Security note">
`VITE_` variables are embedded in your JavaScript bundle and sent to every user's browser. **Never** put secrets (API keys with write access, database URLs, private tokens) in `VITE_` variables. Only use them for public configuration like API base URLs and feature flags.
</Gotcha>
